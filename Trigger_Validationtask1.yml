    - name: Connect DB and get ci details
      block:
        - name: Connect DB and get ci details
          loop: "{{ filtered_data }}"
          loop_control:
            loop_var: item1
          include_tasks: cmdbci_db.yml
          vars:
            dbhost: "database-1.cpt56hhgq7lv.ap-south-1.rds.amazonaws.com"
            #cmdb_ci: "ANNIE-IBM"
            mysql_credentials:
                login_host: "{{ dbhost }}"
                login_user: "admin"
                login_port: "3306"
                login_password: "ansible123"
                login_db: "taskdata"
            item: "{{ item1 }}"
          register: task_final_output

      rescue:
        - name: Connect DB and get ci details
          debug:
            msg: "Error occurred while connecting db and fetching details"
